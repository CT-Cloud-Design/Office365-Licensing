"use strict";function registerServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register(ServiceWorkerJS,{scope:"/"})}function defaultSettings(){Settings.Highlight1="#CCCC00",Settings.Highlight2="#AA00CC",Settings.Highlight3="#00CCBB",Settings.Menu="Open",Settings.Theme="Light",Settings.Zoom="Fit"}function loadSettings(){defaultSettings();const e=localStorage.getItem(StoreName.Settings);if(e){const t=JSON.parse(e);t&&(t.Highlight1&&(Settings.Highlight1=t.Highlight1),t.Highlight2&&(Settings.Highlight2=t.Highlight2),t.Highlight3&&(Settings.Highlight3=t.Highlight3),t.Menu&&(Settings.Menu=t.Menu),t.Theme&&(Settings.Theme=t.Theme),t.Zoom&&(Settings.Zoom=t.Zoom))}}function saveSettings(){const e=JSON.stringify(Settings);localStorage.setItem(StoreName.Settings,e)}function setTheme(e){const t=document.getElementsByTagName("html")[0];switch(e){case"Light":t.className="theme-light";break;case"Dark":t.className="theme-dark";break;case"System":default:t.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"theme-dark":"theme-light"}}function themeChange(e){if("System"===Settings.Theme){const t=document.getElementsByTagName("html")[0];t.className=e.matches?"theme-dark":"theme-light"}}function addThemeListener(e){const t=window.matchMedia("(prefers-color-scheme: dark)");"addEventListener"in t&&t.addEventListener("change",e)}function exportPng(e,t,n){const i=document.createElement("canvas"),o=i.getContext("2d"),a=new Image;a.onload=function(){i.width=a.width,i.height=a.height,n&&(o.fillStyle=n,o.rect(0,0,i.width,i.height),o.fill()),"imageSmoothingQuality"in o&&(o.imageSmoothingQuality="high"),o.drawImage(a,0,0),i.toBlob(function(t){downloadBlob(e,t)})},a.src="data:image/svg+xml;base64,"+btoa(t)}function exportSvg(e,t){const n=new Blob([t],{type:"image/svg+xml"});downloadBlob(e,n)}function simulateClick(e){e.click()}function downloadBlob(e,t){if("msSaveBlob"in navigator)navigator.msSaveBlob(t,e);else{const n=document.createElement("a");n.rel="noopener",n.download=e,n.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(n.href)},45e3),setTimeout(function(){simulateClick(n)},0)}}function createElementFromHtml(e){const t=document.createElement("div");return t.innerHTML=e,t.firstChild}function fixToMaxItemWidth(e,t,n){let i=0;const o=document.getElementsByClassName(e);for(let e=0;e<o.length;e+=1){const t=o[e];n&&""!==t.style.width&&(t.style.width=""),t.clientWidth>i&&(i=t.clientWidth)}i+=t;for(let e=0;e<o.length;e+=1){const t=o[e];t.style.width=i+"px"}}function headerEnter(e){let t=e.target.getElementsByTagName("a");0!==t.length&&(t=t.item(0),t.style.display="inline")}function headerLeave(e){let t=e.target.getElementsByTagName("a");0!==t.length&&(t=t.item(0),t.style.display="none")}function setupHeaders(e){const t=document.getElementsByTagName(e);for(let e=0;e<t.length;e+=1){const n=t[e];n.addEventListener("mouseenter",headerEnter),n.addEventListener("mouseleave",headerLeave);let i=n.getElementsByTagName("a");0!==i.length&&(i=i.item(0),i.href="#"+n.id)}}function customAlert(e){window.alert(e)}function customConfirm(e){return window.confirm(e)}function customPrompt(e,t){return window.prompt(e,t)}const ServiceWorkerJS="sw.min.js",StoreName={Flags:"flags",Settings:"settings"},Settings={},Mouse={Button:{Left:0,Middle:1,Right:2,Back:3,Forward:4},Buttons:{Left:1,Right:2,Middle:4,Back:8,Forward:16},Which:{Left:1,Middle:2,Right:3}},isIE=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident"),isIOSChrome=-1!==navigator.userAgent.indexOf("CriOS"),isIOSEdge=-1!==navigator.userAgent.indexOf("EdgiOS"),isIOS=-1!==window.navigator.userAgent.indexOf("iPad")||-1!==window.navigator.userAgent.indexOf("iPhone");"function"!=typeof Array.prototype.contains&&(Array.prototype.contains=function(e){if(null===this)throw new TypeError;return-1!==this.indexOf(e)}),"function"!=typeof Array.prototype.remove&&(Array.prototype.remove=function(e){if(null===this)throw new TypeError;const t=this.indexOf(e);-1!==t&&this.splice(t,1)});